<!-- Spinner -->
<div *ngIf="isLoading" class="spinner-overlay">
  <div class="spinner"></div>
</div>

<div class="food-bg">

  <h2 class="text-center mb-4">Food List</h2>

  <!-- Food Cards Container -->
  <div class="food-container">
    <div class="food-card" *ngFor="let food of foods">
      <img [src]="food.photo" alt="Food Image" />
      <p><b>Food ID:</b> {{ food.foodId }}</p>
      <p><b>Food Name:</b> {{ food.foodName }}</p>
      <p><b>Price:</b> {{ food.price | currency:'INR'}}</p>
      <p><b>Stock Quantity:</b> {{ food.stockQuantity }}</p>
      <h3 *ngIf="food.stockQuantity === 0" class="out-of-stock-message">Out of stock</h3>

      <button class="btn btn-warning" (click)="openEditPopup(food)">Edit</button>
      <button class="btn btn-danger" (click)="confirmDeleteFood(food.foodId)">Delete</button>
    </div>
  </div>

  <!-- Edit Popup -->
  <div class="dialog-overlay" *ngIf="showPopup">
    <div class="dialog-box">
      <h2>Edit Food</h2>
      <form (ngSubmit)="updateFood()">
        <div class="form-group mb-3">
          <label>Food Name:</label>
          <input type="text" [(ngModel)]="selectedFood.foodName" name="foodName" class="form-control" required />
        </div>
        <div class="form-group mb-3">
          <label>Price:</label>
          <input type="number" [(ngModel)]="selectedFood.price" name="price" class="form-control" required />
        </div>
        <div class="form-group mb-3">
          <label>Stock Quantity:</label>
          <input type="number" [(ngModel)]="selectedFood.stockQuantity" name="stockQuantity" class="form-control" required />
        </div>
        <button type="submit" class="btn btn-success">Save</button>
        <button type="button" class="btn btn-secondary" (click)="closePopup()">Cancel</button>
      </form>
    </div>
  </div>

  <!-- Delete Confirmation Dialog -->
  <div class="dialog-overlay" *ngIf="showDialog">
    <div class="dialog-box">
      <h2>Delete Confirmation</h2>
      <p>Are you sure you want to delete this food item?</p>
      <button class="btn btn-danger" (click)="onDialogConfirm(true)">Yes</button>
      <button class="btn btn-secondary" (click)="onDialogConfirm(false)">No</button>
    </div>
  </div>

</div>
